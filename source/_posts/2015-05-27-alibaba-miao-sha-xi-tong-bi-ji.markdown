---
layout: post
title: "阿里巴巴秒杀系统笔记"
date: 2015-05-27 15:53:58 +0800
comments: true
categories: Bigdata
---
##技术挑战
### 瞬间高并发
1. 8000并发
2. 风险：带宽耗尽
3. 服务器：崩溃
### 秒杀器
1. 秒杀前不断刷新秒杀页面，直到秒杀开始
2. 跳过秒杀页面，直接进入下单页面


## 准备
### 服务器
* style服务器（lighttpd集群）        5台
* 图片服务器（Nginx集群）            5台
* 静态服务器（Apache集群）          10台
* 交易服务器（Jboss动态集群）      10台

### 带宽
* 图片出口带宽上限：2.5G 
* CDN准备：Chinacache沟通；借用Taobao CDN

## 设计原则
* 静态化： 采用**JS自动更新技术**将动态页面转化为静态页面
* 并发控制，防秒杀器：设置阀门，只放**最前面的一部分人**进入秒杀系统
* 简化流程：砍掉不重要的分支流程，如下单页面的所有数据库查询；以下单成功作为秒杀成功标志。支付流程只要在1天内完成即可
* 前端优化

## 其他
* HTML静态化
* CDN内容分发网络
* 应用层分布式设计
* 硬件四层交换 F5
* 软件四层交换 LVS
* Squid集群
* 服务器分离：和主业务服务器隔离，同时做垂直切分
* 数据库集群和库表散列
* 缓存
* 负载均衡
* 七层交换 Haproxy Nginx
* 